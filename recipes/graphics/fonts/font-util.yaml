inherit: [autotools]

metaEnvironment:
    PKG_VERSION: "1.4.1"
    PKG_DESCRIPTION: "X.Org font utilities"
    PKG_LICENSE: "LicenseRef-fontutil"
    PKG_LICENSE_PATH: |
        fontutil:COPYING

checkoutSCM:
    scm: url
    url: https://xorg.freedesktop.org/releases/individual/font/font-util-${PKG_VERSION}.tar.xz
    digestSHA256: 5c9f64123c194b150fee89049991687386e6ff36ef2af7b80ba53efaf368cc95
    stripComponents: 1

buildScript: |
    autotoolsBuild $1

packageScript: |
    # The tools need to be accompanied by the .pc-file and other data...
    autotoolsPackageDev
    autotoolsPackageTgt

    # Workaround so that 'fontrootdir' is not affected by pc-file
    # relocation.
    sed -i -e '/^prefix=/c prefix=/dummy' \
           -e '/^libdir=/c libdir=${prefix}/lib' \
           -e '/^datarootdir=/c datarootdir=/usr/share' \
           -e '/^mapdir=/c mapdir=/dummy/share/fonts/X11/util' \
        usr/lib/pkgconfig/fontutil.pc

provideTools:
    fontUtil: "usr/bin"
