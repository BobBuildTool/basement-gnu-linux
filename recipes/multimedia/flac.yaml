inherit: [cmake]

metaEnvironment:
    PKG_VERSION: "1.5.0"
    PKG_LICENSE: "GFDL-1.3, GPL-2.0, LGPL-2.1, BSD-3-Clause"

depends:
    - multimedia::ogg-dev
    - use: []
      depends:
          - multimedia::ogg-tgt

checkoutSCM:
    scm: url
    url: ${GITHUB_MIRROR}/xiph/flac/archive/refs/tags/${PKG_VERSION}.tar.gz
    digestSHA256: aea54ed186ad07a34750399cb27fc216a2b62d0ffcd6dc2e3064a3518c3146f8
    stripComponents: 1

buildScript: |
    cmakeBuild $1 \
        -DINSTALL_MANPAGES=OFF

multiPackage:
    "":
        depends:
            - name: multimedia::flac-tgt
              use: [ ]
        packageScript: cmakePackageBin
        provideDeps: ['*-tgt']

    dev:
        packageScript: cmakePackageDev
        provideDeps: ['*-dev']

    tgt:
        packageScript: cmakePackageLib
        provideDeps: ['*-tgt']
