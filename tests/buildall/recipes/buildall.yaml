inherit: ['basement::rootrecipe']

depends:
    - use: [result]
      depends:
          # devel stuff (usually) not deployed to targets -> host compat toolchain
          - devel::byacc
          - devel::dtc
          - devel::intltool
          - devel::lua-bin
          - devel::makedepend
          - devel::nasm
          - devel::rpcsvc-proto
          - devel::squashfs-tools
          - devel::swi-prolog

    - name: libs::protobuf
      use: [tools]
      forward: true
    - name: libs::glib-tools
      use: [tools]
      forward: true

multiPackage:
    aarch64:
        depends:
            - name: devel::cross-toolchain-aarch64-linux-gnu
              use: [tools]
              forward: true

            - all

    x86_64:
        environment:
            MESA3D_PLATFORM: "x11"
            MESA3D_INTEL: "true"
            MESA3D_GALLIUM_DRIVERS: "iris"
            MESA3D_DRI3: "enabled"
            MESA3D_GLX: "auto"

        depends:
            - name: devel::cross-toolchain-x86_64-linux-gnu
              use: [tools]
              forward: true

            - all
            - bsp::grub2
            - bsp::intel::microcode
            - utils::iucode-tool # uses cpuid which is not available on !x86

            - name: libs::mesa3d-tgt
              alias: libs::mesa3d-intel-tgt

            - graphics::xorg::setxkbmap
            - graphics::xorg::xauth
            - graphics::xorg::xf86-input-evdev
            - graphics::xorg::xf86-video-fbdev
            - graphics::xorg::xinit
            - graphics::xorg::xrdb
            - graphics::xorg::xserver
            - graphics::xorg::xset
            - graphics::xorg::xsetroot
            - graphics::xorg::xterm

buildScript: |
  /bin/true

packageScript: |
  /bin/true
